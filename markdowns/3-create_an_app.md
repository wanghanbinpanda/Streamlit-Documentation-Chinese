# Create an app

å¦‚æœä½ å·²ç»èµ°åˆ°äº†è¿™ä¸€æ­¥ï¼Œé‚£ä¹ˆä½ æœ‰å¯èƒ½å·²ç»[å®‰è£…](https://docs.streamlit.io/library/get-started/installation)äº†Streamlitï¼Œå¹¶åœ¨æˆ‘ä»¬çš„[ä¸»è¦æ¦‚å¿µ](https://docs.streamlit.io/library/get-started/main-concepts)æŒ‡å—ä¸­å­¦ä¹ äº†åŸºç¡€çŸ¥è¯†ã€‚å¦‚æœæ²¡æœ‰ï¼Œç°åœ¨æ˜¯çœ‹ä¸€çœ‹çš„å¥½æ—¶æœºã€‚

å­¦ä¹ å¦‚ä½•ä½¿ç”¨Streamlitçš„æœ€ç®€å•çš„æ–¹æ³•æ˜¯è‡ªå·±å»å°è¯•ã€‚å½“ä½ é˜…è¯»æœ¬æŒ‡å—æ—¶ï¼Œæµ‹è¯•æ¯ä¸ªæ–¹æ³•ã€‚åªè¦ä½ çš„åº”ç”¨ç¨‹åºåœ¨è¿è¡Œï¼Œæ¯å½“ä½ åœ¨è„šæœ¬ä¸­æ·»åŠ ä¸€ä¸ªæ–°å…ƒç´ å¹¶ä¿å­˜æ—¶ï¼ŒStreamlitçš„ç”¨æˆ·ç•Œé¢å°±ä¼šè¯¢é—®ä½ æ˜¯å¦æ„¿æ„é‡æ–°è¿è¡Œåº”ç”¨ç¨‹åºå¹¶æŸ¥çœ‹å˜åŒ–ã€‚è¿™ä½¿å¾—ä½ å¯ä»¥åœ¨ä¸€ä¸ªå¿«é€Ÿçš„äº¤äº’å¼å¾ªç¯ä¸­å·¥ä½œï¼šä½ å†™ä¸€äº›ä»£ç ï¼Œä¿å­˜å®ƒï¼ŒæŸ¥çœ‹è¾“å‡ºï¼Œå†å†™ä¸€äº›ï¼Œå¦‚æ­¤åå¤ï¼Œç›´åˆ°ä½ å¯¹ç»“æœæ„Ÿåˆ°æ»¡æ„ã€‚æˆ‘ä»¬çš„ç›®æ ‡æ˜¯ä½¿ç”¨Streamlitä¸ºä½ çš„æ•°æ®æˆ–æ¨¡å‹åˆ›å»ºä¸€ä¸ªäº¤äº’å¼åº”ç”¨ï¼Œå¹¶åœ¨æ­¤è¿‡ç¨‹ä¸­ä½¿ç”¨Streamlitæ¥å®¡æŸ¥ã€è°ƒè¯•ã€å®Œå–„å’Œåˆ†äº«ä½ çš„ä»£ç ã€‚

åœ¨æœ¬æŒ‡å—ä¸­ï¼Œä½ å°†ä½¿ç”¨Streamlitçš„æ ¸å¿ƒåŠŸèƒ½æ¥åˆ›å»ºä¸€ä¸ªäº¤äº’å¼åº”ç”¨ç¨‹åºï¼›æ¢ç´¢Uberåœ¨çº½çº¦å¸‚çš„å…¬å…±æ•°æ®é›†çš„æ¥é€æœåŠ¡ã€‚å½“ä½ å®Œæˆåï¼Œä½ å°†çŸ¥é“å¦‚ä½•è·å–å’Œç¼“å­˜æ•°æ®ï¼Œç»˜åˆ¶å›¾è¡¨ï¼Œåœ¨åœ°å›¾ä¸Šç»˜åˆ¶ä¿¡æ¯ï¼Œå¹¶ä½¿ç”¨äº¤äº’å¼éƒ¨ä»¶ï¼Œå¦‚æ»‘å—ï¼Œæ¥å¯¹ç»“æœè¿›è¡Œè¿‡æ»¤ã€‚

> **æç¤º**
> å¦‚æœæ‚¨æƒ³è·³è¿‡å¹¶ç«‹å³æŸ¥çœ‹æ‰€æœ‰å†…å®¹ï¼Œä¸‹é¢æä¾›äº†å®Œæ•´çš„è„šæœ¬ã€‚

## åˆ›å»ºç¬¬ä¸€ä¸ªåº”ç”¨ç¨‹åº

Streamlitä¸ä»…ä»…æ˜¯ä¸€ç§åˆ¶ä½œæ•°æ®åº”ç”¨ç¨‹åºçš„æ–¹å¼ï¼Œå®ƒè¿˜æ˜¯ä¸€ä¸ªç”±åˆ›ä½œè€…ç»„æˆçš„ç¤¾åŒºï¼Œä»–ä»¬åˆ†äº«è‡ªå·±çš„åº”ç”¨å’Œæƒ³æ³•ï¼Œå¹¶äº’ç›¸å¸®åŠ©ï¼Œä½¿è‡ªå·±çš„ä½œå“å˜å¾—æ›´å¥½ã€‚è¯·åˆ°ç¤¾åŒºè®ºå›ä¸ŠåŠ å…¥æˆ‘ä»¬ã€‚æˆ‘ä»¬å–œæ¬¢å¬ä½ çš„é—®é¢˜å’Œæƒ³æ³•ï¼Œå¹¶å¸®åŠ©ä½ è§£å†³ç¨‹åºä¸­çš„é”™è¯¯â€”â€”ä»Šå¤©å°±åŠ å…¥å§!

1. é¦–å…ˆï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„Pythonè„šæœ¬ã€‚æˆ‘ä»¬ç§°ä½œ```uber_pickups.py```ã€‚

2. åœ¨ä½ å–œæ¬¢çš„IDEæˆ–æ–‡æœ¬ç¼–è¾‘å™¨ä¸­æ‰“å¼€```uber_pickups.py```ï¼Œç„¶åæ·»åŠ è¿™äº›ä»£ç ï¼š

```python
import streamlit as st
import pandas as pd
import numpy as np
```

3. æ¯ä¸ªå¥½çš„åº”ç”¨ç¨‹åºéƒ½æœ‰ä¸€ä¸ªæ ‡é¢˜ï¼Œæ‰€ä»¥è®©æˆ‘ä»¬æ·»åŠ ä¸€ä¸ªï¼š

```python
st.title('Uber pickups in NYC')
```

4. ç°åœ¨æ˜¯æ—¶å€™ä»å‘½ä»¤è¡Œè¿è¡ŒStreamlitäº†ï¼š

```python
streamlit run uber_pickups.py
```

è¿è¡ŒStreamlitåº”ç”¨ç¨‹åºä¸å…¶ä»–çš„Pythonè„šæœ¬æ²¡æœ‰ä»€ä¹ˆä¸åŒã€‚æ¯å½“ä½ éœ€è¦æŸ¥çœ‹åº”ç”¨ç¨‹åºæ—¶ï¼Œä½ å¯ä»¥ä½¿ç”¨è¿™ä¸ªå‘½ä»¤ã€‚

> **æç¤º**
> ä½ çŸ¥é“ä½ ä¹Ÿå¯ä»¥å‘streamlitè¿è¡Œä¼ é€’ä¸€ä¸ªURLå—ï¼Ÿè¿™åœ¨ä¸GitHub Gistsç»“åˆæ—¶éå¸¸å¥½ç”¨ã€‚æ¯”å¦‚è¯´ï¼š
>
> ```python
> streamlit run uber_pickups.py
> ```

5. åƒå¾€å¸¸ä¸€æ ·ï¼Œè¯¥åº”ç”¨ç¨‹åºä¼šè‡ªåŠ¨åœ¨ä½ çš„æµè§ˆå™¨ä¸­æ‰“å¼€ä¸€ä¸ªæ–°æ ‡ç­¾ã€‚

## è·å–ä¸€äº›æ•°æ®

ç°åœ¨ä½ æœ‰äº†ä¸€ä¸ªåº”ç”¨ç¨‹åºï¼Œä½ éœ€è¦åšçš„ä¸‹ä¸€ä»¶äº‹æ˜¯è·å–Uberåœ¨çº½çº¦å¸‚çš„æ¥é€æ•°æ®é›†ã€‚

1. è®©æˆ‘ä»¬å…ˆå†™ä¸€ä¸ªå‡½æ•°æ¥åŠ è½½æ•°æ®ã€‚å°†è¿™æ®µä»£ç æ·»åŠ åˆ°ä½ çš„è„šæœ¬ä¸­ï¼š

```python
DATE_COLUMN = 'date/time'
DATA_URL = ('https://s3-us-west-2.amazonaws.com/'
         'streamlit-demo-data/uber-raw-data-sep14.csv.gz')

def load_data(nrows):
    data = pd.read_csv(DATA_URL, nrows=nrows)
    lowercase = lambda x: str(x).lower()
    data.rename(lowercase, axis='columns', inplace=True)
    data[DATE_COLUMN] = pd.to_datetime(data[DATE_COLUMN])
    return data
```

ä½ ä¼šæ³¨æ„åˆ°```load_data```æ˜¯ä¸€ä¸ªæ™®é€šçš„å‡½æ•°ï¼Œå®ƒä¸‹è½½äº†ä¸€äº›æ•°æ®ï¼ŒæŠŠå®ƒæ”¾åœ¨ä¸€ä¸ªPandasæ•°æ®æ¡†æ¶ä¸­ï¼Œå¹¶æŠŠæ—¥æœŸåˆ—ä»textè½¬æ¢ä¸ºdatetimeã€‚è¯¥å‡½æ•°æ¥å—ä¸€ä¸ªå‚æ•°ï¼ˆ```nrows```ï¼‰ï¼Œå®ƒæŒ‡å®šäº†ä½ æƒ³åŠ è½½åˆ°æ•°æ®æ¡†æ¶ä¸­çš„è¡Œæ•°ã€‚

2. ç°åœ¨è®©æˆ‘ä»¬æµ‹è¯•ä¸€ä¸‹è¿™ä¸ªå‡½æ•°å¹¶æŸ¥çœ‹è¾“å‡ºã€‚åœ¨ä½ çš„å‡½æ•°ä¸‹é¢ï¼Œæ·»åŠ è¿™äº›è¡Œï¼š

```python
# Create a text element and let the reader know the data is loading.
data_load_state = st.text('Loading data...')
# Load 10,000 rows of data into the dataframe.
data = load_data(10000)
# Notify the reader that the data was successfully loaded.
data_load_state.text('Loading data...done!')
```

ä½ ä¼šåœ¨ä½ çš„åº”ç”¨ç¨‹åºçš„å³ä¸Šè§’çœ‹åˆ°å‡ ä¸ªæŒ‰é’®ï¼Œè¯¢é—®ä½ æ˜¯å¦æ„¿æ„é‡æ–°è¿è¡Œè¯¥åº”ç”¨ç¨‹åºã€‚é€‰æ‹©**æ€»æ˜¯é‡æ–°è¿è¡Œ**ï¼Œä½ å°±ä¼šåœ¨æ¯æ¬¡ä¿å­˜æ—¶è‡ªåŠ¨çœ‹åˆ°ä½ çš„å˜åŒ–ã€‚

å¥½å§ï¼Œè¿™å¤ªä»¤äººæ²®ä¸§äº†...

äº‹å®è¯æ˜ï¼Œä¸‹è½½æ•°æ®ï¼Œå¹¶å°†10,000è¡ŒåŠ è½½åˆ°ä¸€ä¸ªæ•°æ®æ¡†æ¶ä¸­éœ€è¦å¾ˆé•¿çš„æ—¶é—´ã€‚å°†æ—¥æœŸåˆ—è½¬æ¢ä¸ºdatetimeä¹Ÿä¸æ˜¯ä¸€ä»¶èƒ½å¤Ÿè¿…é€Ÿå®Œæˆçš„å·¥ä½œã€‚ä½ ä¸å¸Œæœ›æ¯æ¬¡åº”ç”¨æ›´æ–°æ—¶éƒ½è¦é‡æ–°åŠ è½½æ•°æ®â€”â€”å¹¸è¿çš„æ˜¯ï¼ŒStreamlitå…è®¸ä½ ç¼“å­˜æ•°æ®ã€‚

## æ˜“ç”¨çš„ç¼“å­˜

1. è¯•ç€åœ¨```load_data```å£°æ˜å‰åŠ å…¥```@st.cache_data```ï¼š

```python
@st.cache_data
def load_data(nrows):
```

2. ç„¶åä¿å­˜è„šæœ¬ï¼ŒStreamlitä¼šè‡ªåŠ¨é‡æ–°è¿è¡Œä½ çš„åº”ç”¨ç¨‹åºã€‚ç”±äºè¿™æ˜¯ä½ ç¬¬ä¸€æ¬¡è¿è¡Œå¸¦æœ‰```@st.cache_data```çš„è„šæœ¬ï¼Œä½ ä¸ä¼šçœ‹åˆ°ä»»ä½•å˜åŒ–ã€‚è®©æˆ‘ä»¬å†è°ƒæ•´ä¸€ä¸‹ä½ çš„æ–‡ä»¶ï¼Œä»¥ä¾¿ä½ èƒ½çœ‹åˆ°ç¼“å­˜çš„åŠ›é‡ã€‚  

3. æŠŠ```data_load_state.text('Loading data...done!')```è¿™ä¸€è¡Œæ›¿æ¢æˆè¿™æ ·ï¼š

```python
data_load_state.text("Done! (using st.cache_data)")
```

4. ç°åœ¨ä¿å­˜ã€‚çœ‹åˆ°ä½ æ·»åŠ çš„é‚£ä¸€è¡Œæ˜¯å¦‚ä½•ç«‹å³å‡ºç°çš„å—ï¼Ÿå¦‚æœä½ é€€åä¸€æ­¥ï¼Œè¿™å®é™…ä¸Šæ˜¯ç›¸å½“æƒŠäººçš„ã€‚ä¸€äº›ç¥å¥‡çš„äº‹æƒ…æ­£åœ¨å¹•åå‘ç”Ÿï¼Œè€Œä¸”åªéœ€è¦ä¸€è¡Œä»£ç å°±å¯ä»¥æ¿€æ´»å®ƒã€‚

### å®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„?

è®©æˆ‘ä»¬èŠ±å‡ åˆ†é’Ÿæ—¶é—´æ¥è®¨è®ºä¸€ä¸‹```@st.cache_data```çš„å®é™…å·¥ä½œåŸç†ã€‚

å½“ä½ ç”¨Streamlitçš„ç¼“å­˜æ³¨è§£æ ‡è®°ä¸€ä¸ªå‡½æ•°æ—¶ï¼Œå®ƒå‘Šè¯‰Streamlitï¼Œæ¯å½“å‡½æ•°è¢«è°ƒç”¨æ—¶ï¼Œå®ƒåº”è¯¥æ£€æŸ¥ä¸¤ä»¶äº‹ï¼š

1. ä½ ç”¨äºå‡½æ•°è°ƒç”¨çš„è¾“å…¥å‚æ•°ã€‚
2. å‡½æ•°ä¸­çš„ä»£ç ã€‚

å¦‚æœè¿™æ˜¯Streamlitç¬¬ä¸€æ¬¡çœ‹åˆ°è¿™ä¸¤æ ·ä¸œè¥¿ï¼Œè€Œä¸”æ˜¯ä»¥è¿™ç§ç¡®åˆ‡çš„å€¼ï¼Œä»¥è¿™ç§ç¡®åˆ‡çš„ç»„åˆï¼Œå®ƒå°±ä¼šè¿è¡Œè¿™ä¸ªå‡½æ•°å¹¶å°†ç»“æœå­˜å‚¨åœ¨æœ¬åœ°ç¼“å­˜ä¸­ã€‚ä¸‹æ¬¡è°ƒç”¨è¯¥å‡½æ•°æ—¶ï¼Œå¦‚æœè¿™ä¸¤ä¸ªå€¼æ²¡æœ‰å˜åŒ–ï¼Œé‚£ä¹ˆStreamlitçŸ¥é“å®ƒå¯ä»¥å®Œå…¨è·³è¿‡æ‰§è¡Œè¯¥å‡½æ•°ã€‚ç›¸åï¼Œå®ƒä»æœ¬åœ°ç¼“å­˜ä¸­è¯»å–è¾“å‡ºï¼Œå¹¶å°†å…¶ä¼ é€’ç»™è°ƒç”¨è€…â€”â€”å°±åƒé­”æœ¯ä¸€æ ·ã€‚

"ä½†æ˜¯ï¼Œç­‰ä¸€ä¸‹ï¼Œ"ä½ ä¼šå¯¹è‡ªå·±è¯´ï¼Œ"è¿™å¬èµ·æ¥å¥½å¾—ä¸è±¡æ˜¯çœŸçš„ã€‚æ‰€æœ‰è¿™äº›ç¥å¥‡çš„ä¸œè¥¿æœ‰ä»€ä¹ˆé™åˆ¶ï¼Ÿ"

å—¯ï¼Œæœ‰ä¸€äº›ï¼š

1. Streamlitåªæ£€æŸ¥å½“å‰å·¥ä½œç›®å½•ä¸‹çš„å˜åŒ–ã€‚å¦‚æœä½ å‡çº§äº†ä¸€ä¸ªPythonåº“ï¼ŒStreamlitçš„ç¼“å­˜åªä¼šåœ¨è¯¥åº“å®‰è£…åœ¨ä½ çš„å·¥ä½œç›®å½•å†…æ—¶æ‰ä¼šæ³¨æ„åˆ°è¿™ä¸€ç‚¹ã€‚
2. å¦‚æœä½ çš„å‡½æ•°ä¸æ˜¯ç¡®å®šæ€§çš„ï¼ˆä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒçš„è¾“å‡ºå–å†³äºéšæœºæ•°ï¼‰ï¼Œæˆ–è€…å®ƒä»å¤–éƒ¨æ—¶é—´å˜åŒ–çš„æºå¤´æ‹‰å–æ•°æ®ï¼ˆä¾‹å¦‚ï¼Œä¸€ä¸ªå®æ—¶çš„è‚¡ç¥¨å¸‚åœºè¡Œæƒ…æœåŠ¡ï¼‰ï¼Œé‚£ä¹ˆç¼“å­˜çš„å€¼å°†æ˜¯ä¸æ˜æ™ºçš„ã€‚
3. æœ€åï¼Œä½ åº”è¯¥é¿å…æ”¹å˜ç”¨```st.cache_data```ç¼“å­˜çš„å‡½æ•°çš„è¾“å‡ºï¼Œå› ä¸ºç¼“å­˜çš„å€¼æ˜¯é€šè¿‡å¼•ç”¨å­˜å‚¨çš„ã€‚

è™½ç„¶è¿™äº›é™åˆ¶å¾ˆé‡è¦ï¼Œä½†åœ¨å¾ˆå¤šæ—¶å€™ï¼Œå®ƒä»¬å¾€å¾€ä¸æ˜¯ä¸€ä¸ªé—®é¢˜ã€‚é‚£äº›æ—¶å€™ï¼Œè¿™ä¸ªç¼“å­˜ç¡®å®æ˜¯å˜é©æ€§çš„ã€‚

>**æç¤º**
>æ¯å½“ä½ çš„ä»£ç ä¸­æœ‰ä¸€ä¸ªé•¿æœŸè¿è¡Œçš„è®¡ç®—æ—¶ï¼Œå¦‚æœå¯èƒ½çš„è¯ï¼Œè€ƒè™‘é‡æ„å®ƒï¼Œä»¥ä¾¿ä½ å¯ä»¥ä½¿ç”¨```@st.cache_data```ã€‚è¯·é˜…è¯»[Caching](https://docs.streamlit.io/library/advanced-features/caching)ä»¥äº†è§£æ›´å¤šç»†èŠ‚ã€‚

ç°åœ¨ä½ çŸ¥é“äº†Streamlitçš„ç¼“å­˜æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Œè®©æˆ‘ä»¬å›åˆ°Uber pickupæ•°æ®ä¸Šã€‚

## æ£€æŸ¥åŸå§‹æ•°æ®

åœ¨ä½ å¼€å§‹å·¥ä½œä¹‹å‰ï¼Œçœ‹ä¸€çœ‹ä½ æ‰€å¤„ç†çš„åŸå§‹æ•°æ®æ€»æ˜¯ä¸€ä¸ªå¥½ä¸»æ„ã€‚è®©æˆ‘ä»¬åœ¨åº”ç”¨ç¨‹åºä¸­æ·»åŠ ä¸€ä¸ªå‰¯æ ‡é¢˜å’ŒåŸå§‹æ•°æ®çš„æ‰“å°è¾“å‡ºï¼š

```python
st.subheader('Raw data')
st.write(data)
```

åœ¨[ä¸»è¦æ¦‚å¿µæŒ‡å—](https://docs.streamlit.io/library/get-started/main-concepts)ä¸­ï¼Œä½ äº†è§£åˆ°[st.write](https://docs.streamlit.io/library/api-reference/write-magic/st.write)ä¼šæ¸²æŸ“ä½ ä¼ é€’ç»™å®ƒçš„å‡ ä¹ä»»ä½•ä¸œè¥¿ã€‚åœ¨æœ¬ä¾‹ä¸­ï¼Œä½ ä¼ å…¥çš„æ˜¯ä¸€ä¸ªæ•°æ®æ¡†æ¶ï¼Œå®ƒè¢«æ¸²æŸ“æˆä¸€ä¸ªäº¤äº’å¼è¡¨æ ¼ã€‚

[st.write](https://docs.streamlit.io/library/api-reference/write-magic/st.write)è¯•å›¾æ ¹æ®è¾“å…¥çš„æ•°æ®ç±»å‹æ¥åšæ­£ç¡®çš„äº‹æƒ…ã€‚å¦‚æœå®ƒæ²¡æœ‰åšä½ æœŸæœ›çš„äº‹æƒ…ï¼Œä½ å¯ä»¥ä½¿ç”¨ä¸€ä¸ªä¸“é—¨çš„å‘½ä»¤ï¼Œå¦‚[st.dataframe](https://docs.streamlit.io/library/api-reference/data/st.dataframe)æ¥ä»£æ›¿ã€‚å®Œæ•´çš„åˆ—è¡¨è¯·è§[APIå‚è€ƒ](https://docs.streamlit.io/library/api-reference)ã€‚

## ç»˜åˆ¶ç›´æ–¹å›¾

ç°åœ¨ä½ å·²ç»æœ‰æœºä¼šçœ‹ä¸€çœ‹æ•°æ®é›†ï¼Œè§‚å¯Ÿä¸€ä¸‹æœ‰å“ªäº›ä¸œè¥¿ï¼Œè®©æˆ‘ä»¬æ›´è¿›ä¸€æ­¥ï¼Œç”»ä¸€ä¸ªç›´æ–¹å›¾ï¼Œçœ‹çœ‹Uberåœ¨çº½çº¦å¸‚æœ€ç¹å¿™çš„æ—¶é—´æ˜¯ä»€ä¹ˆã€‚

1. é¦–å…ˆï¼Œè®©æˆ‘ä»¬åœ¨åŸå§‹æ•°æ®éƒ¨åˆ†ä¸‹é¢æ·»åŠ ä¸€ä¸ªå‰¯æ ‡é¢˜ï¼š

```python
st.subheader('Number of pickups by hour')
```

2. ä½¿ç”¨NumPyç”Ÿæˆä¸€ä¸ªç›´æ–¹å›¾ï¼Œå°†æ¥å®¢æ—¶é—´æŒ‰å°æ—¶è¿›è¡Œåˆ†ç±»ï¼š

```python
hist_values = np.histogram(
    data[DATE_COLUMN].dt.hour, bins=24, range=(0,24))[0]
```

3. ç°åœ¨ï¼Œè®©æˆ‘ä»¬ä½¿ç”¨Streamlitçš„[st.bar_chart()](https://docs.streamlit.io/library/api-reference/charts/st.bar_chart)æ–¹æ³•æ¥ç»˜åˆ¶è¿™ä¸ªç›´æ–¹å›¾ã€‚

```python
st.bar_chart(hist_values)
```

4. ä¿å­˜ä½ çš„è„šæœ¬ã€‚è¿™ä¸ªç›´æ–¹å›¾åº”è¯¥é©¬ä¸Šæ˜¾ç¤ºåœ¨ä½ çš„åº”ç”¨ç¨‹åºä¸­ã€‚ç»è¿‡å¿«é€Ÿå®¡æŸ¥ï¼Œçœ‹èµ·æ¥æœ€ç¹å¿™çš„æ—¶é—´æ˜¯17:00ï¼ˆä¸‹åˆ5ç‚¹ï¼‰ã€‚

ä¸ºäº†ç»˜åˆ¶è¿™ä¸ªå›¾è¡¨ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†Streamlitçš„æœ¬åœ°```bar_chart()```æ–¹æ³•ï¼Œä½†é‡è¦çš„æ˜¯ï¼ŒStreamlitæ”¯æŒæ›´å¤æ‚çš„å›¾è¡¨åº“ï¼Œå¦‚Altairã€Bokehã€Plotlyã€Matplotlibç­‰ã€‚å®Œæ•´çš„åˆ—è¡¨è¯·è§[æ”¯æŒçš„å›¾è¡¨åº“](https://docs.streamlit.io/library/api-reference/charts)ã€‚

## åœ¨åœ°å›¾ä¸Šç»˜åˆ¶æ•°æ®

ä½¿ç”¨Uberçš„æ•°æ®é›†çš„ç›´æ–¹å›¾å¸®åŠ©æˆ‘ä»¬ç¡®å®šä»€ä¹ˆæ˜¯æœ€ç¹å¿™çš„æ¥å®¢æ—¶é—´ï¼Œä½†å¦‚æœæˆ‘ä»¬æƒ³å¼„æ¸…æ¥šæ•´ä¸ªåŸå¸‚çš„æ¥å®¢é›†ä¸­åœ¨å“ªé‡Œå‘¢ã€‚è™½ç„¶ä½ å¯ä»¥ç”¨æŸ±çŠ¶å›¾æ¥æ˜¾ç¤ºè¿™ä¸ªæ•°æ®ï¼Œä½†é™¤éä½ å¯¹åŸå¸‚çš„ç»çº¬åº¦åæ ‡éå¸¸ç†Ÿæ‚‰ï¼Œå¦åˆ™å®ƒä¸å®¹æ˜“è§£é‡Šã€‚ä¸ºäº†æ˜¾ç¤ºæ‹¾å–çš„é›†ä¸­åº¦ï¼Œè®©æˆ‘ä»¬ä½¿ç”¨Streamlitçš„[st.map](https://docs.streamlit.io/library/api-reference/charts/st.map)å‡½æ•°å°†æ•°æ®å åŠ åˆ°çº½çº¦å¸‚çš„åœ°å›¾ä¸Šã€‚

1. ä¸ºè¯¥éƒ¨åˆ†æ·»åŠ ä¸€ä¸ªå°æ ‡é¢˜ï¼š

```python  
st.subheader('Map of all pickups')
```

2. ä½¿ç”¨```st.map()```å‡½æ•°æ¥ç»˜åˆ¶æ•°æ®ï¼š

```python
st.map(data)
```

3. ä¿å­˜ä½ çš„è„šæœ¬ã€‚è¯¥åœ°å›¾æ˜¯å®Œå…¨äº’åŠ¨çš„ã€‚é€šè¿‡å¹³ç§»æˆ–æ”¾å¤§ä¸€ç‚¹æ¥è¯•è¯•ã€‚

ç”»å®Œç›´æ–¹å›¾åï¼Œä½ ç¡®å®šUberæ¥å®¢æœ€ç¹å¿™çš„æ—¶é—´æ˜¯17ç‚¹ã€‚è®©æˆ‘ä»¬é‡æ–°ç»˜åˆ¶åœ°å›¾ï¼Œä»¥æ˜¾ç¤º17:00çš„é›†ä¸­æ¥å®¢æƒ…å†µã€‚

1. æ‰¾åˆ°ä»¥ä¸‹ä»£ç æ®µï¼š

```python
st.subheader('Map of all pickups')
st.map(data)
```

2. å°†å…¶æ›¿æ¢ä¸ºï¼š

```python
hour_to_filter = 17
filtered_data = data[data[DATE_COLUMN].dt.hour == hour_to_filter]
st.subheader(f'Map of all pickups at {hour_to_filter}:00')
st.map(filtered_data)
```

3. ä½ åº”è¯¥çœ‹åˆ°æ•°æ®ç«‹å³æ›´æ–°ã€‚

ä¸ºäº†ç»˜åˆ¶è¿™å¼ åœ°å›¾ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†Streamlitå†…ç½®çš„[st.map](https://docs.streamlit.io/library/api-reference/charts/st.map)å‡½æ•°ï¼Œä½†å¦‚æœä½ æƒ³æŠŠå¤æ‚çš„åœ°å›¾æ•°æ®å¯è§†åŒ–ï¼Œæˆ‘ä»¬é¼“åŠ±ä½ çœ‹ä¸€ä¸‹[st.pydeck_chart](https://docs.streamlit.io/library/api-reference/charts/st.pydeck_chart)ã€‚

## ç”¨æ»‘å—è¿‡æ»¤ç»“æœ

åœ¨ä¸Šä¸€èŠ‚ä¸­ï¼Œå½“ä½ ç»˜åˆ¶åœ°å›¾æ—¶ï¼Œç”¨äºè¿‡æ»¤ç»“æœçš„æ—¶é—´è¢«ç¡¬ç¼–ç åˆ°è„šæœ¬ä¸­ï¼Œä½†å¦‚æœæˆ‘ä»¬æƒ³è®©è¯»è€…å®æ—¶åŠ¨æ€åœ°è¿‡æ»¤æ•°æ®å‘¢ï¼Ÿä½¿ç”¨Streamlitçš„å°å·¥å…·ï¼Œä½ å¯ä»¥åšåˆ°ã€‚è®©æˆ‘ä»¬ç”¨```st.slider()```æ–¹æ³•åœ¨åº”ç”¨ç¨‹åºä¸­æ·»åŠ ä¸€ä¸ªæ»‘å—ã€‚

1. æ‰¾åˆ°```hour_to_filter```ï¼Œç”¨è¿™ä¸ªä»£ç æ®µæ›¿æ¢å®ƒï¼š

```python
hour_to_filter = st.slider('hour', 0, 23, 17)  # min: 0h, max: 23h, default: 17h
```

2. ä½¿ç”¨æ»‘å—å¹¶å®æ—¶è§‚çœ‹åœ°å›¾æ›´æ–°ã€‚

## ä½¿ç”¨æŒ‰é’®åˆ‡æ¢æ•°æ®

æ»‘å—åªæ˜¯åŠ¨æ€æ›´æ”¹åº”ç”¨ç¨‹åºç»„æˆçš„ä¸€ç§æ–¹æ³•ã€‚è®©æˆ‘ä»¬ä½¿ç”¨[st.checkbox](https://docs.streamlit.io/library/api-reference/widgets/st.checkbox)åŠŸèƒ½ä¸ºæ‚¨çš„åº”ç”¨ç¨‹åºæ·»åŠ ä¸€ä¸ªå¤é€‰æ¡†ã€‚æˆ‘ä»¬å°†ä½¿ç”¨æ­¤å¤é€‰æ¡†æ¥æ˜¾ç¤º/éšè—åº”ç”¨ç¨‹åºé¡¶éƒ¨çš„åŸå§‹æ•°æ®è¡¨ã€‚

1. æ‰¾åˆ°è¿™äº›è¡Œï¼š

```python
st.subheader('Raw data')
st.write(data)
```

2.å°†è¿™äº›è¡Œæ›¿æ¢ä¸ºä»¥ä¸‹ä»£ç ï¼š

```python
if st.checkbox('Show raw data'):
    st.subheader('Raw data')
    st.write(data)
```

æˆ‘ä»¬ç¡®ä¿¡ä½ æœ‰è‡ªå·±çš„æƒ³æ³•ã€‚å®Œæˆæœ¬æ•™ç¨‹åï¼Œè¯·æŸ¥çœ‹Streamlitåœ¨æˆ‘ä»¬çš„[APIå‚è€ƒ](https://docs.streamlit.io/library/api-reference)ä¸­å…¬å¼€çš„æ‰€æœ‰å°éƒ¨ä»¶ã€‚

## è®©æˆ‘ä»¬æŠŠå®ƒä»¬æ”¾åœ¨ä¸€èµ·

å°±æ˜¯è¿™æ ·ï¼Œä½ å·²ç»æ¥åˆ°äº†æœ€åçš„éƒ¨åˆ†ã€‚è¿™æ˜¯æˆ‘ä»¬äº¤äº’å¼åº”ç”¨ç¨‹åºçš„å®Œæ•´è„šæœ¬ã€‚

>**æç¤º**
>å¦‚æœæ‚¨å·²ç»è·³è¿‡ï¼Œåœ¨åˆ›å»ºè„šæœ¬åï¼Œè¿è¡ŒStreamlitçš„å‘½ä»¤æ˜¯```Streamlit run[app name]```ã€‚

```python
import streamlit as st
import pandas as pd
import numpy as np

st.title('Uber pickups in NYC')

DATE_COLUMN = 'date/time'
DATA_URL = ('https://s3-us-west-2.amazonaws.com/'
            'streamlit-demo-data/uber-raw-data-sep14.csv.gz')

@st.cache_data
def load_data(nrows):
    data = pd.read_csv(DATA_URL, nrows=nrows)
    lowercase = lambda x: str(x).lower()
    data.rename(lowercase, axis='columns', inplace=True)
    data[DATE_COLUMN] = pd.to_datetime(data[DATE_COLUMN])
    return data

data_load_state = st.text('Loading data...')
data = load_data(10000)
data_load_state.text("Done! (using st.cache_data)")

if st.checkbox('Show raw data'):
    st.subheader('Raw data')
    st.write(data)

st.subheader('Number of pickups by hour')
hist_values = np.histogram(data[DATE_COLUMN].dt.hour, bins=24, range=(0,24))[0]
st.bar_chart(hist_values)

# Some number in the range 0-23
hour_to_filter = st.slider('hour', 0, 23, 17)
filtered_data = data[data[DATE_COLUMN].dt.hour == hour_to_filter]

st.subheader('Map of all pickups at %s:00' % hour_to_filter)
st.map(filtered_data)
```
![è¿è¡Œç»“æœ](../3-create_an_app.assets/create_a_app.gif)

## åˆ†äº«ä½ çš„åº”ç”¨

åœ¨æ‚¨æ„å»ºäº†Streamlightåº”ç”¨ç¨‹åºä¹‹åï¼Œæ˜¯æ—¶å€™åˆ†äº«å®ƒäº†ï¼ä¸ºäº†å‘ä¸–ç•Œå±•ç¤ºå®ƒï¼Œæ‚¨å¯ä»¥ä½¿ç”¨**Streamlitç¤¾åŒºäº‘**å…è´¹éƒ¨ç½²ã€ç®¡ç†å’Œå…±äº«æ‚¨çš„åº”ç”¨ç¨‹åºã€‚
å®ƒåˆ†ä¸º3ä¸ªç®€å•æ­¥éª¤ï¼š

1. å°†ä½ çš„åº”ç”¨ç¨‹åºæ”¾åœ¨å…¬å…±GitHub repoä¸­ï¼ˆå¹¶ç¡®ä¿å®ƒæœ‰requirements.txtï¼ï¼‰
2. ç™»å½•[share.streamlit.io](https://share.streamlit.io/)
3. å•å‡»â€œéƒ¨ç½²åº”ç”¨ç¨‹åºâ€ï¼Œç„¶åç²˜è´´åˆ°æ‚¨çš„GitHub URLä¸­
   å°±æ˜¯è¿™æ ·ï¼ğŸˆ æ‚¨ç°åœ¨æœ‰äº†ä¸€ä¸ªå…¬å¼€éƒ¨ç½²çš„åº”ç”¨ç¨‹åºï¼Œå¯ä»¥ä¸ä¸–ç•Œå…±äº«ã€‚å•å‡»ä»¥äº†è§£æœ‰å…³[å¦‚ä½•ä½¿ç”¨Streamlightç¤¾åŒºäº‘](https://docs.streamlit.io/streamlit-community-cloud)çš„æ›´å¤šä¿¡æ¯ã€‚

## è·å¾—å¸®åŠ©

å°±è¿™æ ·å¼€å§‹å§ï¼Œç°åœ¨ä½ å¯ä»¥å¼€å§‹æ„å»ºè‡ªå·±çš„åº”ç”¨äº†ï¼å¦‚æœä½ é‡åˆ°å›°éš¾ï¼Œè¿™é‡Œæœ‰å‡ ä»¶äº‹ä½ å¯ä»¥åšã€‚

* æŸ¥çœ‹æˆ‘ä»¬çš„[ç¤¾åŒºè®ºå›](https://discuss.streamlit.io/)å¹¶å‘å¸ƒé—®é¢˜
* ä½¿ç”¨```streamlit help```ä»å‘½ä»¤è¡Œè·å¾—å¿«é€Ÿå¸®åŠ©
* æµè§ˆæˆ‘ä»¬çš„[çŸ¥è¯†åº“](https://docs.streamlit.io/knowledge-base)ï¼Œäº†è§£æœ‰å…³åˆ›å»ºå’Œéƒ¨ç½²Streamlightåº”ç”¨ç¨‹åºçš„æç¤ºã€åˆ†æ­¥æ•™ç¨‹å’Œæ–‡ç« ã€‚
* é˜…è¯»æ›´å¤šæ–‡æ¡£ï¼æŸ¥çœ‹ï¼š
  * ç¼“å­˜ã€ä¸»é¢˜åŒ–å’Œä¸ºåº”ç”¨ç¨‹åºæ·»åŠ çŠ¶æ€ç­‰[é«˜çº§åŠŸèƒ½](https://docs.streamlit.io/library/advanced-features)ã€‚
  * æ¯ä¸ªStreamlitå‘½ä»¤ç¤ºä¾‹çš„[APIå‚è€ƒ](https://docs.streamlit.io/library/api-reference)ã€‚

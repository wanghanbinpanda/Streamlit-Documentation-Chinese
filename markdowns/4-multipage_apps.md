# Multipage apps

éšç€åº”ç”¨ç¨‹åºå˜å¾—è¶Šæ¥è¶Šå¤§ï¼Œå°†å®ƒä»¬ç»„ç»‡æˆå¤šä¸ªé¡µé¢å˜å¾—éå¸¸æœ‰ç”¨ã€‚è¿™ä½¿å¾—å¼€å‘äººå‘˜æ›´å®¹æ˜“ç®¡ç†åº”ç”¨ç¨‹åºï¼Œç”¨æˆ·ä¹Ÿæ›´å®¹æ˜“æµè§ˆåº”ç”¨ç¨‹åºã€‚Streamlitæä¾›äº†ä¸€ç§åˆ›å»ºå¤šé¡µé¢åº”ç”¨çš„æ— éšœç¢æ–¹å¼ã€‚é¡µé¢ä¼šè‡ªåŠ¨æ˜¾ç¤ºåœ¨åº”ç”¨ç¨‹åºä¾§è¾¹æ å†…çš„ä¸€ä¸ªæ¼‚äº®çš„å¯¼èˆªå°éƒ¨ä»¶ä¸­ï¼Œç‚¹å‡»ä¸€ä¸ªé¡µé¢å°†å¯¼èˆªåˆ°é¡µé¢ï¼Œè€Œæ— éœ€é‡æ–°åŠ è½½å‰ç«¯â€”â€”è¿™ä½¿å¾—åº”ç”¨ç¨‹åºæµè§ˆéå¸¸å¿«!

æˆ‘ä»¬åœ¨[ä¸Šä¸€èŠ‚](https://docs.streamlit.io/library/get-started/create-an-app)ä¸­åˆ›å»ºäº†ä¸€ä¸ªâ€œå•é¡µåº”ç”¨ç¨‹åºâ€ï¼Œæ¢ç´¢çº½çº¦å¸‚çš„å…¬å…±ä¼˜æ­¥æ•°æ®é›†ã€‚åœ¨æœ¬æŒ‡å—ä¸­ï¼Œè®©æˆ‘ä»¬å­¦ä¹ å¦‚ä½•åˆ›å»ºå¤šé¡µåº”ç”¨ç¨‹åºã€‚ä¸€æ—¦æˆ‘ä»¬å¯¹åˆ›å»ºå¤šé¡µé¢åº”ç”¨ç¨‹åºæœ‰äº†åšå®çš„åŸºç¡€ï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨[ä¸‹ä¸€èŠ‚](https://docs.streamlit.io/library/get-started/multipage-apps/create-a-multipage-app)ä¸­ä¸ºè‡ªå·±æ„å»ºä¸€ä¸ª!

## æ„é€ å¤šé¡µåº”ç”¨ç¨‹åº

è®©æˆ‘ä»¬æ¥äº†è§£ä¸€ä¸‹åˆ›å»ºå¤šé¡µåº”ç”¨ç¨‹åºéœ€è¦ä»€ä¹ˆâ€”â€”åŒ…æ‹¬å¦‚ä½•å®šä¹‰é¡µé¢ï¼Œç»“æ„åŒ–å’Œè¿è¡Œå¤šé¡µåº”ç”¨ç¨‹åºï¼Œä»¥åŠå¦‚ä½•åœ¨ç”¨æˆ·ç•Œé¢ä¸­åœ¨é¡µé¢ä¹‹é—´å¯¼èˆªã€‚ä¸€æ—¦ä½ ç†è§£äº†åŸºç¡€çŸ¥è¯†ï¼Œä½ å°±å¯ä»¥ç›´æ¥è·³åˆ°[ä¸‹ä¸€èŠ‚](https://docs.streamlit.io/library/get-started/multipage-apps/create-a-multipage-app)ï¼Œå°†ç†Ÿæ‚‰çš„`streamlit hello`å‘½ä»¤è½¬æ¢ä¸ºå¤šé¡µé¢åº”ç”¨ç¨‹åº!

## è¿è¡Œä¸€ä¸ªå¤šé¡µåº”ç”¨ç¨‹åº

è¿è¡Œå¤šé¡µåº”ç”¨ç¨‹åºä¸è¿è¡Œå•é¡µåº”ç”¨ç¨‹åºæ˜¯ç›¸åŒçš„ã€‚è¿è¡Œå¤šé¡µåº”ç”¨ç¨‹åºçš„å‘½ä»¤æ˜¯:

```
streamlit run [entrypoint file]
```

â€œå…¥å£ç‚¹æ–‡ä»¶â€æ˜¯åº”ç”¨ç¨‹åºå°†æ˜¾ç¤ºç»™ç”¨æˆ·çš„ç¬¬ä¸€é¡µã€‚ä¸€æ—¦ä½ æ·»åŠ äº†é¡µé¢åˆ°ä½ çš„åº”ç”¨ç¨‹åºï¼Œå…¥å£ç‚¹æ–‡ä»¶åœ¨ä¾§è¾¹æ æ˜¾ç¤ºä¸ºæœ€é¡¶éƒ¨çš„é¡µé¢ã€‚ä½ å¯ä»¥æŠŠå…¥å£ç‚¹æ–‡ä»¶çœ‹ä½œåº”ç”¨ç¨‹åºçš„â€œä¸»é¡µâ€ã€‚ä¾‹å¦‚ï¼Œå‡è®¾æ‚¨çš„å…¥å£ç‚¹æ–‡ä»¶æ˜¯`Home.py`ã€‚ç„¶åï¼Œè¦è¿è¡Œä½ çš„åº”ç”¨ç¨‹åºï¼Œä½ å¯ä»¥è¿è¡Œ`streamlit run Home.py`ï¼Œè¿™å°†å¯åŠ¨æ‚¨çš„åº”ç”¨ç¨‹åºå¹¶æ‰§è¡Œ`Home.py`ä¸­çš„ä»£ç ã€‚

## æ·»åŠ é¡µé¢

ä¸€æ—¦åˆ›å»ºäº†å…¥å£ç‚¹æ–‡ä»¶ï¼Œå°±å¯ä»¥é€šè¿‡åœ¨ç›¸å¯¹äºå…¥å£ç‚¹æ–‡ä»¶çš„`pages/`ç›®å½•ä¸­åˆ›å»º`.py`æ–‡ä»¶æ¥æ·»åŠ é¡µé¢ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½ çš„å…¥å£ç‚¹æ–‡ä»¶æ˜¯`Home.py`ï¼Œé‚£ä¹ˆä½ å¯ä»¥åˆ›å»ºä¸€ä¸ª`pages/About.py`æ–‡ä»¶æ¥å®šä¹‰â€œAboutâ€é¡µé¢ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªå¤šé¡µé¢åº”ç”¨çš„æœ‰æ•ˆç›®å½•ç»“æ„:

```
Home.py # è¿™æ˜¯ä½¿ç”¨â€œstreamlit runâ€è¿è¡Œçš„æ–‡ä»¶
â””â”€â”€â”€ pages/
  â””â”€â”€â”€ About.py # è¿™æ˜¯ä¸€ä¸ªé¡µé¢
  â””â”€â”€â”€ 2_Page_two.py # è¿™æ˜¯å¦ä¸€é¡µ
  â””â”€â”€â”€ 3_ğŸ˜_three.py # è¿™æ˜¯ç¬¬ä¸‰é¡µ
```

> **æç¤º**
> åœ¨æ–‡ä»¶åä¸­æ·»åŠ è¡¨æƒ…ç¬¦å·æ—¶ï¼Œæœ€å¥½çš„åšæ³•æ˜¯åŒ…å«ä¸€ä¸ªç¼–å·å‰ç¼€ï¼Œä»¥ä¾¿åœ¨ç»ˆç«¯ä¸­æ›´å®¹æ˜“è‡ªåŠ¨è¡¥å…¨ã€‚ç»ˆç«¯è‡ªåŠ¨å®Œæˆå¯èƒ½ä¼šè¢«unicode(è¿™æ˜¯è¡¨æƒ…ç¬¦å·çš„è¡¨ç¤ºæ–¹å¼)å¼„ç³Šæ¶‚ã€‚

é¡µé¢è¢«å®šä¹‰ä¸º`Pages /`ç›®å½•ä¸‹çš„`.py`æ–‡ä»¶ã€‚é¡µé¢çš„æ–‡ä»¶åæ ¹æ®[ä¸‹é¢ä¸€èŠ‚](https://docs.streamlit.io/library/get-started/multipage-apps#how-pages-are-labeled-and-sorted-in-the-ui)ä¸­çš„è§„åˆ™è½¬æ¢ä¸ºä¾§è¾¹æ ä¸­çš„é¡µé¢åç§°ã€‚ä¾‹å¦‚ï¼Œ`About.py`æ–‡ä»¶å°†åœ¨ä¾§è¾¹æ ä¸­æ˜¾ç¤ºä¸ºâ€œAboutâ€ï¼Œ`2_Page_two.py`æ˜¾ç¤ºä¸ºâ€œPage twoâ€ï¼Œ`3_ğŸ˜_three.py`æ˜¾ç¤ºä¸ºâ€œğŸ˜threeâ€

![](4-Multipage apps.assets/Snipaste_2023-04-14_20-02-48.png)

åªæœ‰`pages/`ç›®å½•ä¸­çš„`.py`æ–‡ä»¶æ‰ä¼šè¢«åŠ è½½ä¸ºé¡µé¢ã€‚Streamlitå¿½ç•¥`pages/`ç›®å½•å’Œå­ç›®å½•ä¸­çš„æ‰€æœ‰å…¶ä»–æ–‡ä»¶ã€‚

## é¡µé¢åœ¨ç”¨æˆ·ç•Œé¢ä¸­æ˜¯å¦‚ä½•è¢«æ ‡è®°å’Œæ’åºçš„

ä¾§è¾¹æ UIä¸­çš„é¡µé¢æ ‡ç­¾æ˜¯æ ¹æ®æ–‡ä»¶åç”Ÿæˆçš„ï¼Œå®ƒä»¬å¯èƒ½ä¸[st.set_page_config](https://docs.streamlit.io/library/api-reference/utilities/st.set_page_config)ä¸­è®¾ç½®çš„é¡µé¢æ ‡é¢˜ä¸åŒã€‚è®©æˆ‘ä»¬äº†è§£ä¸€ä¸‹ä»€ä¹ˆæ„æˆäº†é¡µé¢çš„æœ‰æ•ˆæ–‡ä»¶åï¼Œé¡µé¢å¦‚ä½•åœ¨ä¾§æ ä¸­æ˜¾ç¤ºï¼Œä»¥åŠé¡µé¢å¦‚ä½•æ’åºã€‚

### é¡µçš„æœ‰æ•ˆæ–‡ä»¶å

æ–‡ä»¶åç”±å››ä¸ªä¸åŒçš„éƒ¨åˆ†ç»„æˆ:

1. ä¸€ä¸ªæ•°å­—â€”â€”å¦‚æœæ–‡ä»¶å‰ç¼€æ˜¯ä¸€ä¸ªæ•°å­—ã€‚
2. åˆ†éš”ç¬¦â€”â€”å¯ä»¥æ˜¯`_` ï¼Œ`-` ï¼Œç©ºæ ¼æˆ–å®ƒä»¬çš„ä»»ä½•ç»„åˆã€‚
3. ä¸€ä¸ªæ ‡ç­¾â€”â€”å®ƒæ˜¯`.py` ä¹‹å‰çš„æ‰€æœ‰å†…å®¹ï¼Œä½†ä¸åŒ…æ‹¬`.py` ã€‚
4. æ‰©å±•åâ€”â€”å§‹ç»ˆæ˜¯`.py` ã€‚

### é¡µé¢å¦‚ä½•åœ¨ä¾§æ ä¸­æ˜¾ç¤º

åœ¨ä¾§è¾¹æ ä¸­æ˜¾ç¤ºçš„æ˜¯æ–‡ä»¶åçš„éƒ¨åˆ†:

- å¦‚æœæ²¡æœ‰æ ‡ç­¾ï¼ŒStreamlitä½¿ç”¨æ•°å­—ä½œä¸ºæ ‡ç­¾ã€‚
- åœ¨UIä¸­ï¼ŒStreamlité€šè¿‡å°†`_`æ›¿æ¢ä¸ºç©ºæ ¼æ¥ç¾åŒ–æ ‡ç­¾ã€‚

### é¡µé¢å¦‚ä½•åœ¨ä¾§æ ä¸­æ’åº

æ’åºå°†æ–‡ä»¶åä¸­çš„æ•°å­—è§†ä¸ºå®é™…æ•°å­—(æ•´æ•°):

- æœ‰æ•°å­—çš„æ–‡ä»¶å‡ºç°åœ¨æ²¡æœ‰æ•°å­—çš„æ–‡ä»¶ä¹‹å‰ã€‚
- æ–‡ä»¶æ ¹æ®æ•°å­—(å¦‚æœæœ‰)å’Œæ ‡é¢˜(å¦‚æœæœ‰)è¿›è¡Œæ’åºã€‚
- å½“æ–‡ä»¶æ’åºæ—¶ï¼ŒStreamlitå°†æ•°å­—è§†ä¸ºå®é™…æ•°å­—è€Œä¸æ˜¯å­—ç¬¦ä¸²ã€‚æ‰€ä»¥03å’Œ3æ˜¯ä¸€æ ·çš„ã€‚

æ­¤è¡¨æ˜¾ç¤ºäº†æ–‡ä»¶ååŠå…¶å¯¹åº”æ ‡ç­¾çš„ç¤ºä¾‹ï¼ŒæŒ‰ç…§å®ƒä»¬åœ¨ä¾§æ ä¸­å‡ºç°çš„é¡ºåºè¿›è¡Œæ’åºã€‚

**ç¤ºä¾‹**:

| **æ–‡ä»¶å**              | **æ˜¾ç¤ºæ ‡ç­¾**     |
| ----------------------- | ---------------- |
| 1 - first page.py       | first page       |
| 12 monkeys.py           | monkeys          |
| 123.py                  | 123              |
| 123_hello_dear_world.py | hello dear world |
| _12 monkeys.py          | 12 monkeys       |

> **æç¤º**
> è¡¨æƒ…ç¬¦å·å¯ä»¥è®©ä½ çš„ç½‘é¡µåç§°æ›´æœ‰è¶£!ä¾‹å¦‚ï¼Œä¸€ä¸ªåä¸ºâ€œğŸ _Home.pyâ€çš„æ–‡ä»¶å°†åœ¨ä¾§æ ä¸­åˆ›å»ºä¸€ä¸ªåä¸ºâ€œğŸ Homeâ€çš„é¡µé¢ã€‚

## é¡µé¢é—´å¯¼èˆª

é¡µé¢ä¼šè‡ªåŠ¨æ˜¾ç¤ºåœ¨åº”ç”¨ç¨‹åºä¾§è¾¹æ å†…çš„ä¸€ä¸ªæ¼‚äº®çš„å¯¼èˆªUIä¸­ã€‚å½“ä½ åœ¨ä¾§è¾¹æ UIä¸­å•å‡»ä¸€ä¸ªé¡µé¢æ—¶ï¼ŒStreamlitå¯¼èˆªåˆ°è¯¥é¡µé¢è€Œæ— éœ€é‡æ–°åŠ è½½æ•´ä¸ªå‰ç«¯â€”â€”ä½¿å¾—åº”ç”¨ç¨‹åºæµè§ˆéå¸¸å¿«!

æ‚¨è¿˜å¯ä»¥ä½¿ç”¨urlåœ¨é¡µé¢ä¹‹é—´å¯¼èˆªã€‚é¡µé¢æœ‰è‡ªå·±çš„urlï¼Œç”±æ–‡ä»¶çš„æ ‡ç­¾å®šä¹‰ã€‚å½“å¤šä¸ªæ–‡ä»¶å…·æœ‰ç›¸åŒçš„æ ‡ç­¾æ—¶ï¼ŒStreamlitä¼šé€‰æ‹©ç¬¬ä¸€ä¸ª([åŸºäºä¸Šé¢æè¿°çš„é¡ºåº](https://docs.streamlit.io/library/get-started/multipage-apps#how-pages-are-sorted-in-the-sidebar))ã€‚ç”¨æˆ·å¯ä»¥é€šè¿‡è®¿é—®é¡µé¢çš„URLæ¥æŸ¥çœ‹ç‰¹å®šçš„é¡µé¢ã€‚

å¦‚æœç”¨æˆ·è¯•å›¾è®¿é—®ä¸€ä¸ªä¸å­˜åœ¨çš„é¡µé¢çš„URLï¼Œä»–ä»¬ä¼šçœ‹åˆ°å¦‚ä¸‹æ‰€ç¤ºçš„æ¨¡å¼ï¼Œè¯´ç”¨æˆ·è¯·æ±‚äº†ä¸€ä¸ªä¸åœ¨åº”ç”¨ç¨‹åºæˆ–ç›®å½•ä¸­çš„é¡µé¢ã€‚

![](4-Multipage apps.assets/Snipaste_2023-04-14_20-09-42.png)

## æ³¨æ„äº‹é¡¹

- é¡µé¢æ”¯æŒ[é­”æœ¯å‘½ä»¤](https://docs.streamlit.io/library/api-reference/write-magic/magic)ã€‚

- é¡µé¢æ”¯æŒrun-on-saveã€‚æ­¤å¤–ï¼Œå½“æ‚¨ä¿å­˜é¡µé¢æ—¶ï¼Œè¿™å°†å¯¼è‡´å½“å‰æ­£åœ¨æŸ¥çœ‹è¯¥é¡µé¢çš„ç”¨æˆ·é‡æ–°è¿è¡Œè¯¥é¡µé¢ã€‚

- æ·»åŠ æˆ–åˆ é™¤é¡µé¢ä¼šå¯¼è‡´UIç«‹å³æ›´æ–°ã€‚

- åœ¨ä¾§æ ä¸­æ›´æ–°é¡µé¢ä¸ä¼šé‡æ–°è¿è¡Œè„šæœ¬ã€‚

- `st.set_page_config`åœ¨é¡µé¢çº§åˆ«å·¥ä½œã€‚å½“æ‚¨ä½¿ç”¨[st.set_page_config](https://docs.streamlit.io/library/api-reference/utilities/st.set_page_config)è®¾ç½®æ ‡é¢˜æˆ–å›¾æ ‡æ—¶ï¼Œè¿™åªé€‚ç”¨äºå½“å‰é¡µé¢ã€‚

- é¡µé¢å…¨å±€å…±äº«ç›¸åŒçš„Pythonæ¨¡å—:

  ```
  # page1.py
  import foo
  foo.hello = 123
  
  # page2.py
  import foo
  # If page1 already executed, this should write 123
  st.write(foo.hello)  
  ```

- é¡µé¢å…±äº«ç›¸åŒçš„[st.session_state](https://docs.streamlit.io/library/advanced-features/session-state):

```
# page1.py
import streamlit as st
if "shared" not in st.session_state:
   st.session_state["shared"] = True

# page2.py
import streamlit as st
st.write(st.session_state["shared"])
# If page1 already executed, this should write True
```

ç°åœ¨æ‚¨å·²ç»å¯¹å¤šé¡µé¢åº”ç”¨ç¨‹åºæœ‰äº†å¾ˆå¥½çš„ç†è§£ã€‚æ‚¨å·²ç»å­¦ä¹ äº†å¦‚ä½•åœ¨ç”¨æˆ·ç•Œé¢ä¸­æ„å»ºåº”ç”¨ç¨‹åºã€å®šä¹‰é¡µé¢ä»¥åŠåœ¨é¡µé¢ä¹‹é—´å¯¼èˆªã€‚æ˜¯æ—¶å€™åˆ›å»ºä½ çš„ç¬¬ä¸€ä¸ª[å¤šé¡µé¢åº”ç”¨ç¨‹åº](https://docs.streamlit.io/library/get-started/multipage-apps/create-a-multipage-app)äº†!ğŸ¥³